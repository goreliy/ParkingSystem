{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ü–∞—Ä–∫–æ–≤–∫–∏{% endblock %}

{% block content %}
<div class="card">
    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –°–∏—Å—Ç–µ–º—É –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ü–∞—Ä–∫–æ–≤–∫–∏</h2>
    <p style="margin-bottom: 1.5rem;">
        –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –º–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram.
    </p>
    
    <div class="grid">
        <div class="card" style="margin: 0;">
            <h3 style="margin-bottom: 0.5rem;">üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
            <p style="margin-bottom: 1rem;">–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä–∫–æ–≤–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
            <a href="/dashboard" class="btn">–û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å</a>
        </div>
        
        <div class="card" style="margin: 0;">
            <h3 style="margin-bottom: 0.5rem;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞</h3>
            <p style="margin-bottom: 1rem;">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–º–µ—Ä, –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –∑–æ–Ω –∏ –º–µ—Å—Ç</p>
            <a href="/setup" class="btn">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</a>
        </div>
        
        <div class="card" style="margin: 0;">
            <h3 style="margin-bottom: 0.5rem;">üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h3>
            <p style="margin-bottom: 1rem;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–æ—Ç–∞, —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</p>
            <a href="/config" class="btn">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã</a>
        </div>
    </div>
</div>

<div class="card">
    <h2>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
    <ul style="line-height: 1.8;">
        <li>üìπ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RTSP –∫–∞–º–µ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º</li>
        <li>ü§ñ –î–µ—Ç–µ–∫—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø–æ–º–æ—â—å—é YOLOv8/v12</li>
        <li>‚è±Ô∏è –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–π–º–µ—Ä–∞</li>
        <li>üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</li>
        <li>üé• RTMP —Å—Ç—Ä–∏–º–∏–Ω–≥ –≤ –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª—ã Telegram</li>
        <li>üåê –í–µ–±-–ø–∞–Ω–µ–ª—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ SSE</li>
        <li>üíæ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ JSON (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)</li>
        <li>üñ•Ô∏è –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (Windows + Linux)</li>
    </ul>
</div>

<div class="card">
    <h2>–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h2>
    <ol style="line-height: 1.8;">
        <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª <strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞</strong> –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä –∏ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –∑–æ–Ω</li>
        <li>–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–∞—Ä–∫–æ–≤–æ—á–Ω—ã–µ –º–µ—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö —Å –∫–∞–º–µ—Ä</li>
        <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ <strong>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</strong></li>
        <li>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–∞—Ä–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ <strong>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</strong> –∏–ª–∏ Telegram</li>
    </ol>
</div>

<div class="card">
    <h2>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
    <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
</div>

<script>
async function loadStatus() {
    try {
        const state = await apiRequest('/api/state');
        const config = await apiRequest('/api/config');
        
        const totalSpaces = state.spaces.length;
        const totalSpots = state.spaces.reduce((sum, s) => sum + s.total_spots, 0);
        const occupiedSpots = state.spaces.reduce((sum, s) => sum + s.occupied_spots, 0);
        
        document.getElementById('status').innerHTML = `
            <p><strong>–ü–∞—Ä–∫–æ–≤–æ—á–Ω—ã—Ö –∑–æ–Ω:</strong> ${totalSpaces}</p>
            <p><strong>–í—Å–µ–≥–æ –º–µ—Å—Ç:</strong> ${totalSpots}</p>
            <p><strong>–ó–∞–Ω—è—Ç–æ:</strong> ${occupiedSpots}</p>
            <p><strong>–°–≤–æ–±–æ–¥–Ω–æ:</strong> ${totalSpots - occupiedSpots}</p>
            <p><strong>–°—Ç–∞—Ç—É—Å –±–æ—Ç–∞:</strong> ${config.bot_token ? '‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω' : '‚ùå –ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω'}</p>
        `;
    } catch (error) {
        document.getElementById('status').innerHTML = `<p style="color: #e74c3c;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç—É—Å–∞</p>`;
    }
}

loadStatus();
setInterval(loadStatus, 5000);
</script>
{% endblock %}

